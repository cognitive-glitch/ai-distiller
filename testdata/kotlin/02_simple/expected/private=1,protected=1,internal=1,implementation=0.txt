<file path="/home/janreges/ai-distiller/testdata/kotlin/02_simple/source.kt">
import kotlin.properties.Delegates
import kotlin.random.Random
class Entity {
    var id: String
    var createdAt: Long
    getAge(): Long
    getEntityType(): String
}
class Auditable {
    var lastModified: Long
    var modifiedBy: String
    markModified(by: String)
}
abstract class BaseEntity {
    var id: String
    var createdAt: Long
    constructor(id: String, createdAt: Long)
    *protected var isActive: Boolean
    setActive(active: Boolean)
    abstract validate(): Boolean
    getStatusMessage(): String
}
class Product {
    var name: String
    var category: String
    -private var _price: Double
    constructor(id: String, name: String, category: String, _price: Double)
    var lastModified: Long
    var modifiedBy: String
    var price: Double
    var description: String
    var stock: Int
    var discount: Double
    override getEntityType(): String
    override validate(): Boolean
    override getStatusMessage(): String
    applyDiscount(discountPercent: Double): Double
}
class Category {
    var name: String
    -private var auditDelegate: Auditable
    constructor(id: String, name: String, auditDelegate: Auditable)
}
class AuditImpl {
    var lastModified: Long
    var modifiedBy: String
}
class ProductService {
    -private var auditService: AuditService
    constructor(auditService: AuditService)
    -private var products
    -private var categories
    addProduct(product: Product): Result<Unit>
    findProduct(id: String): Product?
    getProductsInCategory(categoryName: String): List<Product>
    -private validateProductData(product: Product): Boolean
}
class AuditService {
    -private var auditLog
    logAction(action: String, entityId: String)
    getAuditLog(): List<AuditEntry>
}
class ConfigManager {
    -private var config
    setConfig(key: String, value: String)
    getConfig(key: String): String?
    getConfigOrDefault(key: String, default: String): String
}
class ShoppingCart {
    -private var items
    -private var _customerId: String
    constructor()
    constructor(customerId: String)
    var customerId: String
    addItem(product: Product, quantity: Int)
    calculateTotal(): Double
}
main()
</file>
